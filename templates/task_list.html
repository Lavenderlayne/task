{% extends 'base.html' %}

{% block content %}
<h1 class="mb-4 text-center text-light fw-bold text-uppercase">
  Трекер завдань
</h1>

<div class="d-flex justify-content-between align-items-center mb-4">
    <a class="btn btn-light fw-bold text-uppercase" href="{% url 'task_create' %}" role="button">
        Додати завдання
    </a>
    
    <button type="button" class="btn btn-outline-light fw-bold text-uppercase" data-bs-toggle="modal" data-bs-target="#logoutModal">
        Вийти
    </button>
</div>

<div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content bg-dark text-light">
            <div class="modal-header border-secondary">
                <h5 class="modal-title" id="logoutModalLabel">Підтвердження виходу</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Ви впевнені, що хочете вийти з акаунту?
            </div>
            <div class="modal-footer border-secondary">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Скасувати</button>
                <form action="{% url 'logout' %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger">Вийти</button>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="list-group bg-dark rounded">
    {% for task in tasks %}
    <a href="{% url 'task_detail' task.pk %}" 
       class="list-group-item list-group-item-action d-flex justify-content-between align-items-center
              bg-dark border-start border-5
              {% if task.status == 'completed' %}border-white text-white
              {% elif task.status == 'in_progress' %}border-secondary text-secondary
              {% else %}border-muted text-muted
              {% endif %}">
        <span>{{ task.title }}</span>
        <span class="badge rounded-pill
          {% if task.status == 'completed' %}bg-white text-dark
          {% elif task.status == 'in_progress' %}bg-secondary text-light
          {% else %}bg-muted text-light
          {% endif %}">
          {{ task.get_status_display }}
        </span>
    </a>
    {% empty %}
    <div class="alert alert-secondary text-center">Немає завдань.</div>
    {% endfor %}
</div>
{% endblock %}