{% extends 'base.html' %}

{% block content %}
<h1 class="text-center fw-bold mb-4">Трекер завдань</h1>

<div class="d-flex justify-content-between align-items-center mb-3">
    <a class="btn btn-success" href="{% url 'task_create' %}">
        + Додати завдання
    </a>

    <button type="button" class="btn btn-outline-secondary"
            data-bs-toggle="modal" data-bs-target="#logoutModal">
        Вийти
    </button>
</div>

<!-- Модальне вікно підтвердження виходу -->
<div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content border-0 shadow-sm">
      <div class="modal-header">
        <h5 class="modal-title" id="logoutModalLabel">Вийти з акаунту?</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        Ви впевнені, що хочете вийти?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light" data-bs-dismiss="modal">Скасувати</button>
        <form action="{% url 'logout' %}" method="post" class="m-0">
          {% csrf_token %}
          <button type="submit" class="btn btn-danger">Вийти</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Список завдань -->
<div class="list-group">
  {% for task in tasks %}
    <a href="{% url 'task_detail' task.pk %}" 
       class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
       
      <span>{{ task.title }}</span>
      
      <span class="badge rounded-pill 
        {% if task.status == 'completed' %} bg-success
        {% elif task.status == 'in_progress' %} bg-warning text-dark
        {% else %} bg-secondary
        {% endif %}">
        {{ task.get_status_display }}
      </span>
    </a>
  {% empty %}
    <div class="alert alert-light text-center border">
      Немає завдань
    </div>
  {% endfor %}
</div>
{% endblock %}
